<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Sharpen Prototype: Enterprise Dashboard Concepts - Student</title>
    <link rel="stylesheet" href="../build/kezuri.css" />
    <script type="module" src="../build/kezuri.esm.js"></script>
    <script nomodule src="../build/kezuri.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>

    <link rel="stylesheet" href="../enterprise-management/enterprise-layout.css" />

    <style>
      .card-student-at-start {
        background-color: var(--color-gray-5);
      }

      .card-overall-progress {
        background-color: #F1FAF5;
      }

      .sharpen-table-dosage-metrics th:last-child {
        width: 10rem;
      }

      .sharpen-table-dosage-metrics .metric-status {
        width: 1rem;
      }

      .sharpen-table-dosage-metrics .metric-value {
        text-align: center;
        width: 15%;
      }

      .sharpen-table-dosage-metrics .metric-value.off-target {
        background-color: var(--color-light-orange);
        color: var(--color-dark-orange);
        font-weight: bold;
      }

      .sharpen-table-dosage-metrics .metric-value.on-target {
        background-color: var(--color-mint);
        color: var(--color-pine);
        font-weight: bold;
      }

      .sharpen-table-dosage-metrics .metric-status.off-target {
        color: var(--color-dark-orange);
      }

      .sharpen-table-dosage-metrics .metric-status.on-target {
        color: var(--color-pine);
      }

      .sharpen-table--compact {
        font-size: var(--font-size-xs);
      }

      .sharpen-table--compact th, .sharpen-table--compact td {
        padding: var(--spacing-sm);
      }
    </style>
  </head>
  <body>

    <div class="sharpen-enterprise-container">
      <div class="sharpen-enterprise-navigation">
        <a class="brand" href="#"><img src="../build/assets/images/brand/sharpen_logo_ivory.png" /></a>

        <h1 class="district sharpen-heading-sm">Public Schools of Brookline</h1>

        <nav class="sharpen-mb-md">
        <sharpen-nav-link icon="near_me" name="District" href="district_show.html"></sharpen-nav-link>
        </nav>

        <nav class="school-links">
          <h2 class="school sharpen-heading-sans-sm">Runkle School</h2>
          <sharpen-nav-link icon="info" name="About" href="school_show.html"></sharpen-nav-link>
          <sharpen-nav-link icon="supervisor_account" name="Staff" href="school_staff.html"></sharpen-nav-link>
          <sharpen-nav-link icon="meeting_room" name="Classrooms" href="school_classes.html"></sharpen-nav-link>
          <sharpen-nav-link selected icon="face" name="Students" href="school_students.html"></sharpen-nav-link>
          <!-- <sharpen-nav-link icon="groups" name="Groups" href="school_groups.html"></sharpen-nav-link> -->
          <sharpen-nav-link icon="shield_person" name="Admins" href="school_administrators.html"></sharpen-nav-link>
        </nav>

        <nav class="support-links">
          <sharpen-nav-link icon="account_box" name="Dante Cardigan" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="help" name="Support" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="logout" name="Log Out" href="javascript:void();"></sharpen-nav-link>  
        </nav>
        
      </div>
      <main>
        
        <h1 class="sharpen-heading-2xl sharpen-mb-md">
          <a href="schools.html">Schools</a> &rsaquo; <a href="school_show.html">Runkle School</a> &rsaquo; <a href="school_students.html">Students</a> &rsaquo; Onni Abelli
        </h1>

        <div class="row">
          <div class="col-lg-3">
            <sharpen-card border="gray" padding="medium">
              <dl class="sharpen-list">
                <dt>Name</dt>
                <dd class="sharpen-text-lg">Onni Abelli</dd>

                <dt>Reading Status</dt>
                <dd>
                  <sharpen-label type="success" icon="check">At grade level</sharpen-label>
                </dd>

                <dt>Sharpen Tutor</dt>
                <dd>
                  <a href="staff_show.html">Leo Tillens</a>
                </dd>

                <dt>Current Grade</dt>
                <dd>3</dd>

                <dt>Sharpen Level</dt>
                <dd>B2</dd>

                <dt>School</dt>
                <dd><a href="school_show.html">Runkle School</a></dd>

                <dt>Classrooms</dt>
                <dd><a href="school_class.html">Mr. Cardigan - Room 4</a></dd>
              </dl>

              <div class="profile-button-set">
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--primary sharpen-button--full-width">
                  <i class="sharpen-icon">play_arrow</i>
                  Start lesson
                </button>
                <hr>
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--secondary sharpen-button--full-width">
                  <i class="sharpen-icon">edit</i>
                  Edit
                </button>
              </div>
            </sharpen-card>
          </div>
          <div class="col-lg-9">
            <ul class="sharpen-tabs sharpen-mb-md">
              <li class="tab selected">
                <a href="school_student.html"><i class="sharpen-icon">show_chart</i>Progress</a>  
              </li>
              <li class="tab">
                <a href="school_student_reports.html"><i class="sharpen-icon">lab_profile</i>Reports</a>
              </li>
              <li class="tab">
                <a href="school_student_history.html"><i class="sharpen-icon">calendar_today</i>Session History</a>  
              </li>
              <li class="tab">
                <a href="school_student_transitions.html"><i class="sharpen-icon">sync_alt</i>Transitions</a>  
              </li>
            </ul>

            <!--
            <div class="row sharpen-mb-lg">
              <div class="col-lg-4">
                <sharpen-card border="gray" padding="medium" class="card-student-at-start">
                  <dl class="sharpen-list">
                    <dt>Sharpen Start Date</dt>
                    <dd>
                      May 18, 2024
                    </dd>

                    <dt>Reading Status at start</dt>
                    <dd>
                      <sharpen-label type="warning" icon="warning">2 grades behind</sharpen-label>
                    </dd>

                    <dt>Grade at start</dt>
                    <dd>2</dd>

                    <dt>Sharpen Level at start</dt>
                    <dd>A</dd>
                  </dl>
                </sharpen-card>
              </div>
              <div class="col-lg-8">
                
              </div>
            </div>
            -->

            <sharpen-card border="gray" padding="medium" class="card-overall-progress sharpen-mb-md">
              <dl class="sharpen-list">
                <dt>Overall progress</dt>
                <dd>
                  <div class="sharpen-text-lg"><strong>+2.34 grade levels improved</strong></div>
                  <div class="sharpen-text-xs">in 6 months of usage</div>
                </dd>
              </dl>
              <div style="height:250px;">
                <canvas id="viz-overall-progress" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

            <div class="row sharpen-mb-lg">
              <div class="col-md-4">
                <sharpen-card border="gray" padding="medium">
                  <dl class="sharpen-list">
                    <dt>Dosage level, 4-week average</dt>
                  </dl>
                  <sharpen-simple-metric>
                    <div slot="metric" class="sharpen-text--center sharpen-text-4xl sharpen-text--color-pine">114%</div>
                    <div slot="content">
                      of target
                    </div>
                  </sharpen-simple-metric>
                  <hr class="sharpen-my-md">
                  <div class="sharpen-text-xs">Improve outcomes by increasing the number of lessons you complete per session.</div>
                </sharpen-card>
              </div>
              <div class="col-md-8">
                <sharpen-card border="gray" padding="medium">
                  <dl class="sharpen-list">
                    <dt>Weekly dosage, percent of target</dt>
                  </dl>

                  <canvas id="viz-weekly-dosage" class="sharpen-mt-md"></canvas>
                </sharpen-card>
              </div>
            </div>

            <table class="sharpen-table sharpen-table--compact sharpen-table--enclosed sharpen-table-dosage-metrics sharpen-mb-lg">
              <thead>
                <tr>
                  <th></th>
                  <th>Dosage Metric</th>
                  <th class="metric-value">Target</th>
                  <th class="metric-value">Average,<br />all time</th>
                  <th class="metric-value">Average,<br />last 4 weeks</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="metric-status off-target">
                    <i class="sharpen-icon">warning</i>
                  </td>
                  <td>Sessions per week</td>
                  <td class="metric-value">3</td>
                  <td class="metric-value off-target">2.3</td>
                  <td class="metric-value off-target">2.9</td>
                </tr>
                <tr>
                  <td class="metric-status on-target">
                    <i class="sharpen-icon">check</i>
                  </td>
                  <td>Session length (minutes)</td>
                  <td class="metric-value">20</td>
                  <td class="metric-value off-target">18</td>
                  <td class="metric-value on-target">21</td>
                </tr>
                <tr>
                  <td class="metric-status on-target">
                    <i class="sharpen-icon">check</i>
                  </td>
                  <td>Lessons per session</td>
                  <td class="metric-value">1</td>
                  <td class="metric-value on-target">1.1</td>
                  <td class="metric-value on-target">1.2</td>
                </tr>
              </tbody>
            </table>

            <sharpen-card border="gray" padding="medium">
              <dl class="sharpen-list">
                <dt>Mastery of Material by Skill</dt>
              </dl>

              <div style="height: 200px;">
                <canvas id="viz-mastery-by-skill" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

          </div>
        </div>

      </main>
    </div>

    <script>
      const ctx = document.getElementById('viz-overall-progress');
      
      // Register the plugin
      Chart.register(ChartDataLabels);
      
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Jan 8', 'Jan 15', 'Jan 22', 'Jan 29', 'Feb 5', 'Feb 12', 'Feb 19', 'Feb 26', 'Mar 4', 'Mar 18', 'Mar 25', 'Apr 1', 'Apr 8', 'Apr 15', 'Apr 22', 'Apr 29', 'May 6', 'May 13', 'May 20', 'May 27'],
          datasets: [{
            label: 'Grade Levels Improved',
            data: [
              0.1, 0.3, 0.4, 0.5,           // February
              0.8, 1.1, 1.2, 1.25,           // March
              1.3, 1.35, 1.4, 1.5,           // April
              1.55, 1.6, 1.7, 1.8,           // May
              2.0, 2.1, 2.2, 2.3            // June
            ],
            borderColor: '#68a362',
            backgroundColor: '#e8f5e6',
            fill: true,
            tension: 0.4,
            pointRadius: 4,
            pointBackgroundColor: '#68a362',
            pointBorderColor: '#fff',
            pointBorderWidth: 2
          }]
        },
        options: {
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              max: 3.0,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `${value.toFixed(1)}`
              }
            },
            x: {
              grid: {
                color: '#e5e5e5',
                // Only show gridlines for month labels
                callback: (value, index) => index % 4 === 0
              }
            }
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: (context) => `+${context.raw.toFixed(2)} grade levels`
              }
            },
            datalabels: {
              align: 'top',
              // offset: 10,
              formatter: (value) => `${value.toFixed(2)}`,
              color: '#68a362',
              font: {
                size: 9
                // weight: 'bold'
              }
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  xMin: 4.75,
                  xMax: 4.75,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '1 grade level',
                    font: { size: 10 }
                  }
                },
                line2: {
                  type: 'line',
                  xMin: 15.75,
                  xMax: 15.75,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '2 grade levels',
                    font: { size: 10 }
                  }
                }
              }
            }
          }
        }
      });

      // Weekly dosage chart
      const weeklyDosageCtx = document.getElementById('viz-weekly-dosage');
      
      new Chart(weeklyDosageCtx, {
        type: 'bar',
        data: {
          labels: ['Jan 8', 'Jan 15', 'Jan 22', 'Jan 29', 'Feb 5', 'Feb 12', 'Feb 19', 'Feb 26', 'Mar 4', 'Mar 18', 'Mar 25', 'Apr 1', 'Apr 8', 'Apr 15', 'Apr 22', 'Apr 29', 'May 6', 'May 13', 'May 20', 'May 27', 'Jun 3', 'Jun 10', 'Jun 17', 'Jun 24'],
          datasets: [{
            data: [100, 131, 113, 70, 144, 128, 100, 156, 83, 83, 105, 105, 110, 115, 94, 119, 80, 120, 68, 128, 119, 113, 85],
            backgroundColor: function(context) {
              const value = context.raw;
              return value < 80 ? '#C2862B' : '#999999';
            },
            borderColor: 'transparent',
            borderWidth: 1,
            barPercentage: 0.8,
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              max: 160,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `${value}%`
              }
            },
            x: {
              grid: {
                display: false
              },
              ticks: {
                maxRotation: 45,
                minRotation: 45
              }
            }
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.raw}% of target`
              }
            },
            datalabels: {
              display: false  // This will disable the datalabels plugin for this chart
            }
          }
        }
      });

      // Mastery by skill chart
      const masteryCtx = document.getElementById('viz-mastery-by-skill');

      new Chart(masteryCtx, {
        type: 'bar',
        data: {
          labels: ['Feb 1', 'Mar 1', 'Apr 1', 'May 1', 'Jun 1', 'Jul 1'],
          datasets: [
            {
              label: 'Letter Sounds',
              data: [96, 63, 74, 64, 91, 80],
              backgroundColor: '#2E5E29',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Spelling',
              data: [89, 88, 81, 96, 84, 83],
              backgroundColor: '#68A362',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Words',
              data: [77, 82, 69, 66, 79, 93],
              backgroundColor: '#B8DBAA',
              borderColor: 'transparent',
              borderWidth: 1,
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `${value}%`
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          },
          plugins: {
            legend: {
              position: 'left',
              align: 'middle',
              labels: {
                boxWidth: 12,
                usePointStyle: true,
                pointStyle: 'rect'
              }
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.dataset.label}: ${context.raw}%`
              }
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  yMin: 70,
                  yMax: 70,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5]
                }
              }
            },
            datalabels: {
              display: false
            }
          }
        }
      });
    </script>
  </body>
</html>
