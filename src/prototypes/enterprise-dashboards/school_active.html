<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Sharpen Prototype: Enterprise Dashboards - School - Active</title>
    <link rel="stylesheet" href="../build/kezuri.css" />
    <script type="module" src="../build/kezuri.esm.js"></script>
    <script nomodule src="../build/kezuri.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>


    <link rel="stylesheet" href="../enterprise-management/enterprise-layout.css" />
    <link rel="stylesheet" href="dashboards.css" />
  </head>
  <body>

    <div class="sharpen-enterprise-container">
      <div class="sharpen-enterprise-navigation">
        <a class="brand" href="#"><img src="../build/assets/images/brand/sharpen_logo_ivory.png" /></a>

        <h1 class="district sharpen-heading-sm">Public Schools of Brookline</h1>

        <nav class="sharpen-mb-md">
          <sharpen-nav-link icon="near_me" name="District" href="district_show.html"></sharpen-nav-link>
        </nav>

        <nav class="school-links">
          <h2 class="school sharpen-heading-sans-sm">Runkle School</h2>
          <sharpen-nav-link selected icon="info" name="About" href="school_show.html"></sharpen-nav-link>
          <sharpen-nav-link icon="supervisor_account" name="Staff" href="school_staff.html"></sharpen-nav-link>
          <sharpen-nav-link icon="meeting_room" name="Classrooms" href="school_classes.html"></sharpen-nav-link>
          <sharpen-nav-link icon="face" name="Students" href="school_students.html"></sharpen-nav-link>
          <sharpen-nav-link icon="shield_person" name="Admins" href="school_administrators.html"></sharpen-nav-link>
        </nav>

        <nav class="support-links">
          <sharpen-nav-link icon="account_box" name="Dante Cardigan" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="help" name="Support" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="logout" name="Log Out" href="javascript:void();"></sharpen-nav-link>  
        </nav>
        
      </div>
      <main>
        
        <h1 class="sharpen-heading-2xl">
          <a href="schools.html">Schools</a> &rsaquo; Runkle School
        </h1>

        <!-- <form class="sharpen-mb-md">
          <select class="sharpen-form-control">
            <option>All grades</option>
            <option>Grade 1</option>
            <option>Grade 2</option>
            <option>Grade 3</option>
            <option>Grade 4</option>
            <option>Grade 5</option>
          </select>
        </form> -->

        <ul class="sharpen-tabs sharpen-mb-lg">
          <li class="tab selected">
            <a href="school_active.html"><i class="sharpen-icon">bar_chart</i>Snapshot</a>  
          </li>
          <li class="tab">
            <a href="school_outcomes.html"><i class="sharpen-icon">verified</i>Outcomes</a>
          </li>
        </ul>

        <div class="row">
          <div class="col-xl-2 col-lg-3">
            <sharpen-page-navigation>
              <sharpen-nav-link name="All Grades" icon="apps" selected="true" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade K" icon="check_box_outline_blank" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade 1" icon="looks_one" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade 2" icon="looks_two" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade 3" icon="looks_3" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade 4" icon="looks_4" href="javascript:void();"></sharpen-nav-link>
              <sharpen-nav-link name="Grade 5" icon="looks_5" href="javascript:void();"></sharpen-nav-link>
            </sharpen-page-navigation>
          </div>
          <div class="col-xl-10 col-lg-9">

            <h1 class="sharpen-heading-2xl-sans sharpen-mb-lg">258 active students in all grades</h1>
            <h2 class="sharpen-heading-lg">Current Status</h2>

            <div class="row sharpen-mb-lg">
              <div class="col-lg-8">
                <sharpen-card border="gray" padding="medium">
                  <dl class="sharpen-list">
                    <dt>Current Reading Risk Level, By Grade</dt>
                  </dl>
                  <div style="height:250px;">
                    <canvas id="viz-risk-level-by-grade" class="sharpen-mt-md"></canvas>
                  </div>
                </sharpen-card>
              </div>
              <div class="col-lg-4">
                <sharpen-card border="gray" padding="medium">
                  <dl class="sharpen-list">
                    <dt>% students on target pace</dt>
                  </dl>
                  <div style="height:200px;">
                    <canvas id="viz-students-on-pace" class="sharpen-mt-md"></canvas>
                  </div>
                  <div class="sharpen-text-xs">Students meet target pace if they complete 1 lesson per 30 minutes of dosage, on average over 8 weeks.</div>
                </sharpen-card>
              </div>
            </div>

            <h2 class="sharpen-heading-lg">Sharpen Tutoring Dosage &amp; Pace</h2>
            <sharpen-card border="gray" padding="medium" class="card-dosage-pace sharpen-mb-lg">
              <dl class="sharpen-list">
                <dt>% Students Meeting Dosage &amp; Pace, last 8 weeks</dt>
              </dl>
              <div style="height:250px;">
                <canvas id="viz-dosage-pace" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

            <table class="sharpen-table sharpen-table--enclosed sharpen-mb-lg">
              <thead>
                <tr>
                  <th>Tutor</th>
                  <th>Active students</th>
                  <th>% on pace</th>
                  <th>% met dosage, last 4w</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><a href="javascript:void();">Roxanne Michalski</a></td>
                  <td>39</td>
                  <td>91%</td>
                  <td>90%</td>
                </tr>
                <tr>
                  <td><a href="javascript:void();">Katherine O'Neill</a></td>
                  <td>39</td>
                  <td>91%</td>
                  <td>90%</td>
                </tr>
                <tr>
                  <td><a href="javascript:void();">Ruben Polina</a></td>
                  <td>10</td>
                  <td>90%</td>
                  <td>80%</td>
                </tr>
                <tr>
                  <td><a href="javascript:void();">Leo Tillens</a></td>
                  <td>39</td>
                  <td>91%</td>
                  <td>90%</td>
                </tr>
                <tr>
                  <td><a href="javascript:void();">Aura Zimmer</a></td>
                  <td>43</td>
                  <td>92%</td>
                  <td>95%</td>
                </tr>
              </tbody>
            </table>

            <h2 class="sharpen-heading-lg">Sharpen tutoring activity</h2>
            <div class="row">
              <div class="col-xl-6">
                <sharpen-card border="gray" padding="medium" class="sharpen-mb-lg">
                  <dl class="sharpen-list">
                    <dt>Active Students, last 8 weeks</dt>
                  </dl>
                  <div style="height:250px;">
                    <canvas id="viz-sharpen-students-per-week" class="sharpen-mt-md"></canvas>
                  </div>
                </sharpen-card>
              </div>
              <div class="col-xl-6">
                <sharpen-card border="gray" padding="medium" class="sharpen-mb-lg">
                  <dl class="sharpen-list">
                    <dt>Sharpen Sessions, last 8 weeks</dt>
                  </dl>
                  <div style="height:250px;">
                    <canvas id="viz-sharpen-sessions-per-week" class="sharpen-mt-md"></canvas>
                  </div>
                </sharpen-card>
              </div>
            </div>

          </div>
        </div>

      </main>
    </div>

    <script>
      // Register the plugin
      Chart.register(ChartDataLabels);

      Chart.defaults.font.family = 'Sharpen Sans';

      const riskLevelCtx = document.getElementById('viz-risk-level-by-grade');

      new Chart(riskLevelCtx, {
        type: 'bar',
        data: {
          labels: ['Grade 1', 'Grade 2', 'Grade 3', 'Grade 4', 'Grade 5'],
          datasets: [
            {
              label: 'At Grade Level',
              data: [5, 7, 3, 1, 4],
              backgroundColor: '#68A362', // Green
            },
            {
              label: '1 Grade Behind',
              data: [20, 26, 19, 12, 9],
              backgroundColor: '#F2C94C', // Yellow
            },
            {
              label: '2 Grades Behind',
              data: [0, 14, 35, 43, 20],
              backgroundColor: '#F2994A', // Orange
            },
            {
              label: '3+ Grades Behind',
              data: [0, 0, 20, 9, 11],
              backgroundColor: '#B71C1C', // Red
            }
          ]
        },
        options: {
          maintainAspectRatio: false,
          indexAxis: 'y', // Horizontal bar chart
          scales: {
            x: {
              beginAtZero: true,
              stacked: true, // Stack the bars
              grid: {
                color: '#e5e5e5'
              },
              title: { display: true, text: "Active Students" }
            },
            y: {
              stacked: true, // Stack the bars
              grid: {
                display: false
              }
            }
          },
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                usePointStyle: true
              }
            },
            datalabels: {
              display: true,
              formatter: function (value, context) { return (value === 0 ? null : value);  },
              labels: { value: { color: 'white' } }
            }
          }
        }
      });

      const onPaceCtx = document.getElementById('viz-students-on-pace');

      new Chart(onPaceCtx, {
        type: 'pie',
        data: {
          labels: ['On Pace', 'Off Pace'],
          datasets: [{
            data: [219, 39],
            backgroundColor: ['#C8EBD7', '#FFCACA']
          }]
        },
        options: {
          maintainAspectRatio: false,
          plugins: {
            legend: false,
            datalabels: {
              formatter: (value, ctx) => {
                  const datapoints = ctx.chart.data.datasets[0].data
                  const total = datapoints.reduce((total, datapoint) => total + datapoint, 0)
                  const percentage = value / total * 100
                  return percentage.toFixed(1) + "%";
              },
            }
          }
        }
      });

      const dosagePaceCtx = document.getElementById('viz-dosage-pace');

      new Chart(dosagePaceCtx, {
        type: 'bar',
        data: {
          labels: [
            'Jan 1, 2024', 'Jan 8, 2024', 'Jan 15, 2024', 
            'Jan 22, 2024', 'Jan 29, 2024', 'Feb 5, 2024', 
            'Feb 12, 2024', 'Feb 19, 2024'
          ],
          datasets: [
            {
              label: 'Met dosage',
              data: [65, 75, 50, 80, 70, 60, 55, 50],
              backgroundColor: '#31776C99',
              borderWidth: 0
            },
            {
              label: 'On pace',
              data: [80, 85, 60, 90, 75, 70, 80, 85],
              backgroundColor: '#2C5652EE',
              borderWidth: 0
            }
          ]
        },
        options: {
          maintainAspectRatio: false,
          layout: {
            padding: {
              top: 20 // Add padding to the top
            }
          },
          scales: {
            x: {
              beginAtZero: true,
              grid: {
                color: '#e5e5e5'
              },
              title: { display: true, text: 'Week Starting' }
            },
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: '#e5e5e5'
              }
            }
          },
          plugins: {
            legend: {
              position: 'left', // Position the legend on the left
              labels: {
                usePointStyle: true
              }
            },
            datalabels: {
              anchor: 'end',
              align: 'end',
              formatter: (value) => `${value}%`,
              color: '#000',
              font: {
                size: 10
              }
            },
            tooltip: false
          }
        }
      });

      const studentsPerWeekCtx = document.getElementById('viz-sharpen-students-per-week');

      new Chart(studentsPerWeekCtx, {
        type: 'bar',
        data: {
          labels: [
            'Jan 1', 'Jan 8', 'Jan 15', 
            'Jan 22', 'Jan 29', 'Feb 5', 
            'Feb 12', 'Feb 19'
          ],
          datasets: [{
            label: 'Students per Week',
            data: [170, 247, 151, 178, 154, 211, 180, 184],
            backgroundColor: '#2C5652EE',
            borderWidth: 0
          }]
        },
        options: {
          maintainAspectRatio: false,
          layout: {
            padding: {
              top: 20 // Add padding to the top
            }
          },
          scales: {
            x: {
              grid: {
                color: '#e5e5e5'
              },
              title: { display: true, text: 'Week Starting' }
            },
            y: {
              beginAtZero: true,
              grid: {
                color: '#e5e5e5'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            },
            datalabels: {
              anchor: 'end',
              align: 'end',
              formatter: (value) => `${value.toLocaleString()}`,
              color: '#2C5652',
              font: {
                size: 12
              }
            },
            tooltip: false
          }
        }
      });

      const sessionsPerWeekCtx = document.getElementById('viz-sharpen-sessions-per-week');

      new Chart(sessionsPerWeekCtx, {
        type: 'bar',
        data: {
          labels: [
            'Jan 1', 'Jan 8', 'Jan 15', 
            'Jan 22', 'Jan 29', 'Feb 5', 
            'Feb 12', 'Feb 19'
          ],
          datasets: [{
            label: 'Sessions per Week',
            data: [1700, 2470, 1510, 1780, 1540, 2110, 1800, 1840],
            backgroundColor: '#2C5652EE',
            borderWidth: 0
          }]
        },
        options: {
          maintainAspectRatio: false,
          layout: {
            padding: {
              top: 20 // Add padding to the top
            }
          },
          scales: {
            x: {
              grid: {
                color: '#e5e5e5'
              },
              title: { display: true, text: 'Week Starting' }
            },
            y: {
              beginAtZero: true,
              grid: {
                color: '#e5e5e5'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            },
            datalabels: {
              anchor: 'end',
              align: 'end',
              formatter: (value) => `${value.toLocaleString()}`,
              color: '#2C5652',
              font: {
                size: 12
              }
            },
            tooltip: false
          }
        }
      });
    </script>

  </body>
</html>
