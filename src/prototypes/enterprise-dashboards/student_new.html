<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Sharpen Prototype: Enterprise Dashboards - Student - Active</title>
    <link rel="stylesheet" href="../build/kezuri.css" />
    <script type="module" src="../build/kezuri.esm.js"></script>
    <script nomodule src="../build/kezuri.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>

    <link rel="stylesheet" href="../enterprise-management/enterprise-layout.css" />
    <link rel="stylesheet" href="dashboards.css" />
  </head>
  <body>

    <div class="sharpen-enterprise-container">
      <div class="sharpen-enterprise-navigation">
        <a class="brand" href="#"><img src="../build/assets/images/brand/sharpen_logo_ivory.png" /></a>

        <h1 class="district sharpen-heading-sm">Public Schools of Brookline</h1>

        <nav class="sharpen-mb-md">
        <sharpen-nav-link icon="near_me" name="District" href="javascript:void(0);"></sharpen-nav-link>
        </nav>

        <nav class="school-links">
          <h2 class="school sharpen-heading-sans-sm">Runkle School</h2>
          <sharpen-nav-link icon="info" name="About" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="supervisor_account" name="Staff" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="meeting_room" name="Classrooms" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link selected icon="face" name="Students" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="shield_person" name="Admins" href="javascript:void(0);"></sharpen-nav-link>
        </nav>

        <nav class="support-links">
          <sharpen-nav-link icon="account_box" name="Dante Cardigan" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="help" name="Support" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="logout" name="Log Out" href="javascript:void();"></sharpen-nav-link>  
        </nav>
        
      </div>
      <main>
        
        <h1 class="sharpen-heading-2xl sharpen-mb-md">
          <a href="javascript:void(0);">Schools</a> &rsaquo; <a href="javascript:void(0);">Runkle School</a> &rsaquo; <a href="javascript:void(0);">Students</a> &rsaquo; Onni Abelli
        </h1>

        <div class="row">
          <div class="col-lg-3">
            <sharpen-card border="gray" padding="medium">
              <dl class="sharpen-list">
                <dt>Name</dt>
                <dd class="sharpen-text-lg">Onni Abelli</dd>

                <dt>Reading Status</dt>
                <dd>
                  <sharpen-label type="danger" icon="warning">2 grades behind</sharpen-label>
                </dd>

                <dt>Sharpen Tutor</dt>
                <dd>
                  <a href="staff_show.html">Leo Tillens</a>
                </dd>

                <dt>Current Grade</dt>
                <dd>3</dd>

                <dt>Sharpen Level</dt>
                <dd>A</dd>

                <dt>School</dt>
                <dd><a href="school_show.html">Runkle School</a></dd>

                <dt>Classrooms</dt>
                <dd><a href="school_class.html">Mr. Cardigan - Room 4</a></dd>
              </dl>

              <div class="profile-button-set">
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--primary sharpen-button--full-width">
                  <i class="sharpen-icon">play_arrow</i>
                  Start lesson
                </button>
                <hr>
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--secondary sharpen-button--full-width">
                  <i class="sharpen-icon">edit</i>
                  Edit
                </button>
              </div>
            </sharpen-card>
          </div>
          <div class="col-lg-9">
            <ul class="sharpen-tabs sharpen-mb-md">
              <li class="tab selected">
                <a href="school_student.html"><i class="sharpen-icon">show_chart</i>Progress</a>  
              </li>
              <li class="tab">
                <a href="school_student_reports.html"><i class="sharpen-icon">lab_profile</i>Reports</a>
              </li>
              <li class="tab">
                <a href="school_student_history.html"><i class="sharpen-icon">calendar_today</i>Session History</a>  
              </li>
              <li class="tab">
                <a href="school_student_transitions.html"><i class="sharpen-icon">sync_alt</i>Transitions</a>  
              </li>
            </ul>

            <sharpen-card border="gray" padding="medium" class="card-overall-progress sharpen-mb-md">
              <dl class="sharpen-list">
                <dt>Overall progress</dt>
                <dd>
                  <div class="sharpen-text-lg"><strong>Ready to start!</strong></div>
                  <div class="sharpen-text-xs">Below, we'll map Onni's progress as you move through the Sharpen Reading curriculum. The green path shows expected improvement when you follow Sharpen's dosage and pace recommendations.</div>
                </dd>
              </dl>
              <div class="progress-legend sharpen-my-md">
                <span class="target-legend"></span> Pace target
              </div>
              <div style="height:250px;">
                <canvas id="viz-overall-progress" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

            <div class="row">
              <div class="col-lg-6">
                <table class="sharpen-table sharpen-table--compact sharpen-table--enclosed sharpen-table-dosage-metrics sharpen-mb-md">
                  <thead>
                    <tr>
                      <th>Dosage</th>
                      <th class="metric-value">Target</th>
                      <th class="metric-value">Average,<br />last 4w</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Sessions per week</td>
                      <td class="metric-value">3</td>
                      <td class="metric-value">&mdash;</td>
                      <td class="metric-status"></td>
                    </tr>
                    <tr>
                      <td>Session length (minutes)</td>
                      <td class="metric-value">20</td>
                      <td class="metric-value">&mdash;</td>
                      <td class="metric-status"></td>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <a href="targets.html" class="sharpen-button sharpen-button--xsmall sharpen-button--secondary sharpen-button--full-width sharpen-mb-lg">
                  <i class="sharpen-icon">edit</i>
                  Change dosage targets
                </a>
              </div>
              <div class="col-lg-6">
                <table class="sharpen-table sharpen-table--compact sharpen-table--enclosed sharpen-table-dosage-metrics sharpen-mb-lg">
                  <thead>
                    <tr>
                      <th>Pace</th>
                      <th class="metric-value">Target</th>
                      <th class="metric-value">Average,<br />last 4w</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Lessons per hour</td>
                      <td class="metric-value">2</td>
                      <td class="metric-value">&mdash;</td>
                      <td class="metric-status"></td>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <sharpen-card border="gray" padding="medium">
              <dl class="sharpen-list">
                <dt>Mastery of Material by Skill</dt>
              </dl>

              <div class="sharpen-text-xs sharpen-mb-md"><em>Target: Student masters 70% of items encountered</em></div>

              <div style="height: 200px;">
                <canvas id="viz-mastery-by-skill" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

          </div>
        </div>

      </main>
    </div>

    <script>
      const ctx = document.getElementById('viz-overall-progress');
      
      // Register the plugin
      Chart.register(ChartDataLabels);
      Chart.defaults.font.family = 'Sharpen Sans';
      
      new Chart(ctx, {
        plugins: [{
          afterDraw: chart => {
            if (chart.tooltip?._active?.length) {
              let x = chart.tooltip._active[0].element.x;
              let yAxis = chart.scales.y;
              let ctx = chart.ctx;
              ctx.save();
              ctx.beginPath();
              ctx.moveTo(x, yAxis.top);
              ctx.lineTo(x, yAxis.bottom);
              ctx.lineWidth = 1;
              ctx.strokeStyle = 'rgba(104, 104, 104, 0.4)';
              ctx.stroke();
              ctx.restore();
            }
          }
        }],
        type: 'line',
        data: {
          datasets: [{
            data: [],
            borderColor: '#68a362',
            tension: 0.4,
            pointRadius: 4,
            pointBackgroundColor: '#68a362',
            pointBorderColor: '#fff',
            pointBorderWidth: 2
          }]
        },
        options: {
          maintainAspectRatio: false,
          scales: {
            x: {
              type: 'linear',
              max: 50,
              ticks: {
                callback: value => `${value}h`
              }
            },
            y: {
              beginAtZero: true,
              max: 3,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `+${value}`
              }
            }
          },
          plugins: {
            datalabels: {
              display: false
            },
            legend: {
              display: false
            },
            tooltip: {
              intersect: false,
              callbacks: {
                title: (context) => `${context[0].raw.x} total hours`,
                afterTitle: (context) => `as of ${context[0].raw.date}`,
                label: (context) => `+${context.raw.y.toFixed(2)} grade levels improved`
              }
            },
            annotation: {
              annotations: {
                pace1: {
                  type: 'line',
                  drawTime: 'beforeDraw',
                  xMin: 0,
                  xMax: 24,
                  yMax: 1,
                  borderColor: '#e8f5e6',
                  borderWidth: 40,
                },
                pace2: {
                  type: 'line',
                  drawTime: 'beforeDraw',
                  xMin: 23,
                  xMax: 36,
                  yMin: 0.95,
                  yMax: 2,
                  borderColor: '#e8f5e6',
                  borderWidth: 40,
                },
                pace3: {
                  type: 'line',
                  drawTime: 'beforeDraw',
                  xMin: 35,
                  xMax: 45,
                  yMin: 1.93,
                  yMax: 3,
                  borderColor: '#e8f5e6',
                  borderWidth: 40,
                },
                level1: {
                  type: 'line',
                  xMin: 24,
                  xMax: 24,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '1 grade at pace',
                    font: { size: 10 },
                    position: 'start'
                  }
                },
                level2: {
                  type: 'line',
                  xMin: 36,
                  xMax: 36,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '2 grades at pace',
                    font: { size: 10 },
                    position: 'start'
                  }
                },
                level3: {
                  type: 'line',
                  xMin: 45,
                  xMax: 45,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5],
                  label: {
                    display: true,
                    content: '3 grades at pace',
                    font: { size: 10 },
                    position: 'start'
                  }
                }
              }
            }
          }
        }
      });

      // Mastery by skill chart
      const masteryCtx = document.getElementById('viz-mastery-by-skill');

      new Chart(masteryCtx, {
        type: 'bar',
        data: {
          labels: ['A Unit 1', 'A Unit 2', 'A Unit 3', 'A Unit 4', 'A Unit 5', 'A Unit 6'],
          datasets: [
            {
              label: 'Letter Sounds',
              data: [],
              backgroundColor: '#2E5E29',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Spelling',
              data: [],
              backgroundColor: '#68A362',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Words',
              data: [],
              backgroundColor: '#B8DBAA',
              borderColor: 'transparent',
              borderWidth: 1,
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `${value}%`
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          },
          plugins: {
            legend: {
              position: 'left',
              align: 'middle',
              labels: {
                boxWidth: 12,
                usePointStyle: true,
                pointStyle: 'rect'
              }
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.dataset.label}: ${context.raw}%`
              }
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  yMin: 70,
                  yMax: 70,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5]
                }
              }
            },
            datalabels: {
              display: false
            }
          }
        }
      });
    </script>
  </body>
</html>
