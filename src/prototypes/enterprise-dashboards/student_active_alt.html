<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Sharpen Prototype: Enterprise Dashboards - Student - Active</title>
    <link rel="stylesheet" href="../build/kezuri.css" />
    <script type="module" src="../build/kezuri.esm.js"></script>
    <script nomodule src="../build/kezuri.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>

    <link rel="stylesheet" href="../enterprise-management/enterprise-layout.css" />
    <link rel="stylesheet" href="dashboards.css" />

    <style>
      .card-student-at-start {
        background-color: var(--color-gray-5);
      }

      .sharpen-table-dosage-metrics .metric-status {
        width: 1rem;
      }

      .sharpen-table-dosage-metrics .sharpen-icon {
        font-size: var(--font-size-sm);
      }

      .sharpen-table-dosage-metrics .metric-value {
        text-align: center;
        width: 15%;
      }

      .sharpen-table-dosage-metrics .metric-value.off-target {
        background-color: var(--color-light-orange);
        color: var(--color-dark-orange);
        font-weight: bold;
      }

      .sharpen-table-dosage-metrics .metric-value.on-target {
        background-color: var(--color-mint);
        color: var(--color-pine);
        font-weight: bold;
      }

      .sharpen-table-dosage-metrics .metric-status.off-target {
        color: var(--color-dark-orange);
      }

      .sharpen-table-dosage-metrics .metric-status.on-target {
        color: var(--color-pine);
      }

      .sharpen-table--compact {
        font-size: var(--font-size-xs);
      }

      .sharpen-table--compact th, .sharpen-table--compact td {
        padding: var(--spacing-sm);
      }
    </style>
  </head>
  <body>

    <div class="sharpen-enterprise-container">
      <div class="sharpen-enterprise-navigation">
        <a class="brand" href="#"><img src="../build/assets/images/brand/sharpen_logo_ivory.png" /></a>

        <h1 class="district sharpen-heading-sm">Public Schools of Brookline</h1>

        <nav class="sharpen-mb-md">
        <sharpen-nav-link icon="near_me" name="District" href="javascript:void(0);"></sharpen-nav-link>
        </nav>

        <nav class="school-links">
          <h2 class="school sharpen-heading-sans-sm">Runkle School</h2>
          <sharpen-nav-link icon="info" name="About" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="supervisor_account" name="Staff" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="meeting_room" name="Classrooms" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link selected icon="face" name="Students" href="javascript:void(0);"></sharpen-nav-link>
          <sharpen-nav-link icon="shield_person" name="Admins" href="javascript:void(0);"></sharpen-nav-link>
        </nav>

        <nav class="support-links">
          <sharpen-nav-link icon="account_box" name="Dante Cardigan" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="help" name="Support" href="javascript:void();"></sharpen-nav-link>  
          <sharpen-nav-link icon="logout" name="Log Out" href="javascript:void();"></sharpen-nav-link>  
        </nav>
        
      </div>
      <main>
        
        <h1 class="sharpen-heading-2xl sharpen-mb-md">
          <a href="javascript:void(0);">Schools</a> &rsaquo; <a href="javascript:void(0);">Runkle School</a> &rsaquo; <a href="javascript:void(0);">Students</a> &rsaquo; Onni Abelli
        </h1>

        <div class="row">
          <div class="col-lg-3">
            <sharpen-card border="gray" padding="medium">
              <dl class="sharpen-list">
                <dt>Name</dt>
                <dd class="sharpen-text-lg">Onni Abelli</dd>

                <dt>Reading Status</dt>
                <dd>
                  <sharpen-label type="success" icon="check">At grade level</sharpen-label>
                </dd>

                <dt>Sharpen Tutor</dt>
                <dd>
                  <a href="staff_show.html">Leo Tillens</a>
                </dd>

                <dt>Current Grade</dt>
                <dd>3</dd>

                <dt>Sharpen Level</dt>
                <dd>B2</dd>

                <dt>School</dt>
                <dd><a href="school_show.html">Runkle School</a></dd>

                <dt>Classrooms</dt>
                <dd><a href="school_class.html">Mr. Cardigan - Room 4</a></dd>
              </dl>

              <div class="profile-button-set">
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--primary sharpen-button--full-width">
                  <i class="sharpen-icon">play_arrow</i>
                  Start lesson
                </button>
                <hr>
                <button class="sharpen-button sharpen-button--xsmall sharpen-button--secondary sharpen-button--full-width">
                  <i class="sharpen-icon">edit</i>
                  Edit
                </button>
              </div>
            </sharpen-card>
          </div>
          <div class="col-lg-9">
            <ul class="sharpen-tabs sharpen-mb-md">
              <li class="tab selected">
                <a href="school_student.html"><i class="sharpen-icon">show_chart</i>Progress</a>  
              </li>
              <li class="tab">
                <a href="school_student_reports.html"><i class="sharpen-icon">lab_profile</i>Reports</a>
              </li>
              <li class="tab">
                <a href="school_student_history.html"><i class="sharpen-icon">calendar_today</i>Session History</a>  
              </li>
              <li class="tab">
                <a href="school_student_transitions.html"><i class="sharpen-icon">sync_alt</i>Transitions</a>  
              </li>
            </ul>

            <!--
            <div class="row sharpen-mb-lg">
              <div class="col-lg-4">
                <sharpen-card border="gray" padding="medium" class="card-student-at-start">
                  <dl class="sharpen-list">
                    <dt>Sharpen Start Date</dt>
                    <dd>
                      May 18, 2024
                    </dd>

                    <dt>Reading Status at start</dt>
                    <dd>
                      <sharpen-label type="warning" icon="warning">2 grades behind</sharpen-label>
                    </dd>

                    <dt>Grade at start</dt>
                    <dd>2</dd>

                    <dt>Sharpen Level at start</dt>
                    <dd>A</dd>
                  </dl>
                </sharpen-card>
              </div>
              <div class="col-lg-8">
                
              </div>
            </div>
            -->

            <sharpen-card border="gray" padding="medium" class="card-overall-progress sharpen-mb-md">
              <dl class="sharpen-list">
                <dt>Overall progress</dt>
                <dd>
                  <div class="sharpen-text-lg"><strong>+2.34 grade levels improved</strong></div>
                  <div class="sharpen-text-xs">in 39.4 hours of usage</div>
                </dd>
              </dl>
              <div style="height:250px;">
                <canvas id="viz-overall-progress" class="sharpen-mt-md"></canvas>
              </div>
            </sharpen-card>

          </div>
        </div>

      </main>
    </div>

    <script>
      const ctx = document.getElementById('viz-overall-progress');
      
      // Register the plugin
      Chart.register(ChartDataLabels);
      Chart.defaults.font.family = 'Sharpen Sans';
      
      new Chart(ctx, {
        plugins: [{
          afterDraw: chart => {
            if (chart.tooltip?._active?.length) {
              let x = chart.tooltip._active[0].element.x;
              let yAxis = chart.scales.y;
              let ctx = chart.ctx;
              ctx.save();
              ctx.beginPath();
              ctx.moveTo(x, yAxis.top);
              ctx.lineTo(x, yAxis.bottom);
              ctx.lineWidth = 1;
              ctx.strokeStyle = 'rgba(104, 104, 104, 0.4)';
              ctx.stroke();
              ctx.restore();
            }
          }
        }],
        type: 'line',
        data: {
          datasets: [{
            data: [
              { x: 0, y: 0 },
              { x: 1, y: 0.05, date: "2024 May 18" },
              { x: 2, y: 0.1, date: "2024 May 20" },
              { x: 3, y: 0.15, date: "2024 May 22" },
              { x: 4, y: 0.2, date: "2024 May 24" },
              { x: 5, y: 0.25, date: "2024 May 26" },
              { x: 6, y: 0.3, date: "2024 May 28" },
              { x: 7, y: 0.4, date: "2024 May 30" },
              { x: 8, y: 0.5, date: "2024 Jun 1" },
              { x: 9, y: 0.6, date: "2024 Jun 3" },
              { x: 10, y: 0.65, date: "2024 Jun 5" },
              { x: 11, y: 0.67, date: "2024 Jun 7" },
              { x: 12, y: 0.7, date: "2024 Jun 9" },
              { x: 13, y: 0.71, date: "2024 Jun 11" },
              { x: 14, y: 0.75, date: "2024 Jun 13" },
              { x: 15, y: 0.8, date: "2024 Jun 15" },
              { x: 16, y: 0.81, date: "2024 Jun 17" },
              { x: 17, y: 0.82, date: "2024 Jun 19" },
              { x: 18, y: 0.83, date: "2024 Jun 21" },
              { x: 19, y: 0.85, date: "2024 Jun 23" },
              { x: 20, y: 0.87, date: "2024 Jun 25" },
              { x: 21, y: 0.9, date: "2024 Jun 27" },
              { x: 22, y: 0.92, date: "2024 Jun 29" },
              { x: 23, y: 0.95, date: "2024 Jul 1" },
              { x: 24, y: 1.0, date: "2024 Jul 3" },
              { x: 25, y: 1.05, date: "2024 Jul 5" },
              { x: 26, y: 1.2, date: "2024 Jul 7" },
              { x: 27, y: 1.3, date: "2024 Jul 9" },
              { x: 28, y: 1.4, date: "2024 Jul 11" },
              { x: 29, y: 1.5, date: "2024 Jul 13" },
              { x: 30, y: 1.6, date: "2024 Jul 15" },
              { x: 31, y: 1.7, date: "2024 Jul 17" },
              { x: 32, y: 1.8, date: "2024 Jul 19" },
              { x: 33, y: 1.9, date: "2024 Jul 21" },
              { x: 34, y: 2.1, date: "2024 Jul 23" },
              { x: 35, y: 2.15, date: "2024 Jul 25" },
              { x: 36, y: 2.2, date: "2024 Jul 27" },
              { x: 37, y: 2.25, date: "2024 Jul 29" },
              { x: 38, y: 2.3, date: "2024 Aug 1" }
            ],
            borderColor: '#68a362',
            // backgroundColor: '#e8f5e6',
            // fill: true,
            tension: 0.4,
            pointRadius: 4,
            pointBackgroundColor: '#68a362',
            pointBorderColor: '#fff',
            pointBorderWidth: 2
          }]
        },
        options: {
          maintainAspectRatio: false,
          scales: {
            x: {
              type: 'linear',
              max: 50,
              ticks: {
                callback: value => `${value}h`
              }
            },
            y: {
              beginAtZero: true,
              max: 3.5,
              ticks: {
                callback: value => `+${value}`
              }
            }
          },
          plugins: {
            datalabels: {
              display: false
            },
            legend: {
              display: false
            },
            tooltip: {
              intersect: false,
              callbacks: {
                title: (context) => `${context[0].raw.x} total hours`,
                afterTitle: (context) => `as of ${context[0].raw.date}`,
                label: (context) => `+${context.raw.y.toFixed(2)} grade levels improved`
              }
            },
            annotation: {
              annotations: {
                pace3: {
                  type: 'box',
                  drawTime: 'beforeDraw',
                  xMin: 41,
                  xMax: 49,
                  yMin: 2.75,
                  yMax: 3.25,
                  backgroundColor: '#68a36244',
                  borderWidth: 0
                },

                level3: {
                  type: 'box',
                  drawTime: 'beforeDatasetsDraw',
                  xMin: 0,
                  xMax: 41,
                  yMin: 2.75,
                  yMax: 3.25,
                  backgroundColor: '#68a36222',
                  borderWidth: 0,
                  label: {
                    display: true,
                    content: '3 grades at pace',
                    font: { size: 10, weight: 'normal' },
                    position: 'start'
                  }
                },

                pace2: {
                  type: 'box',
                  drawTime: 'beforeDraw',
                  xMin: 32,
                  xMax: 40,
                  yMin: 1.75,
                  yMax: 2.25,
                  backgroundColor: '#68a36244',
                  borderWidth: 0
                },

                level2: {
                  type: 'box',
                  drawTime: 'beforeDatasetsDraw',
                  xMin: 0,
                  xMax: 32,
                  yMin: 1.75,
                  yMax: 2.25,
                  backgroundColor: '#68a36222',
                  borderWidth: 0,
                  label: {
                    display: true,
                    content: '2 grades at pace',
                    font: { size: 10, weight: 'normal' },
                    position: 'start'
                  }
                },

                pace1: {
                  type: 'box',
                  drawTime: 'beforeDatasetsDraw',
                  xMin: 20,
                  xMax: 28,
                  yMin: 0.75,
                  yMax: 1.25,
                  backgroundColor: '#68a36244',
                  borderWidth: 0
                },

                level1: {
                  type: 'box',
                  drawTime: 'beforeDatasetsDraw',
                  xMin: 0,
                  xMax: 20,
                  yMin: 0.75,
                  yMax: 1.25,
                  backgroundColor: '#68a36222',
                  borderWidth: 0,
                  label: {
                    display: true,
                    content: '1 grade at pace',
                    font: { size: 10, weight: 'normal' },
                    position: 'start'
                  }
                },

                // pace1: {
                //   type: 'line',
                //   drawTime: 'beforeDraw',
                //   xMin: 0,
                //   xMax: 24,
                //   yMax: 1,
                //   borderColor: '#e8f5e6',
                //   borderWidth: 40,
                // },
                // pace2: {
                //   type: 'line',
                //   drawTime: 'beforeDraw',
                //   xMin: 23,
                //   xMax: 36,
                //   yMin: 0.95,
                //   yMax: 2,
                //   borderColor: '#e8f5e6',
                //   borderWidth: 40,
                // },
                // pace3: {
                //   type: 'line',
                //   drawTime: 'beforeDraw',
                //   xMin: 35,
                //   xMax: 45,
                //   yMin: 1.93,
                //   yMax: 3,
                //   borderColor: '#e8f5e6',
                //   borderWidth: 40,
                // },
                // level1: {
                //   type: 'line',
                //   xMin: 24,
                //   xMax: 24,
                //   borderColor: '#666666',
                //   borderWidth: 1,
                //   borderDash: [5, 5],
                //   label: {
                //     display: true,
                //     content: '1 grade at pace',
                //     font: { size: 10 },
                //     position: 'start'
                //   }
                // },
                // level2: {
                //   type: 'line',
                //   xMin: 36,
                //   xMax: 36,
                //   borderColor: '#666666',
                //   borderWidth: 1,
                //   borderDash: [5, 5],
                //   label: {
                //     display: true,
                //     content: '2 grades at pace',
                //     font: { size: 10 },
                //     position: 'start'
                //   }
                // },
                // level3: {
                //   type: 'line',
                //   xMin: 45,
                //   xMax: 45,
                //   borderColor: '#666666',
                //   borderWidth: 1,
                //   borderDash: [5, 5],
                //   label: {
                //     display: true,
                //     content: '3 grades at pace',
                //     font: { size: 10 },
                //     position: 'start'
                //   }
                // }
              }
            }
          }
        }
        // options: {
        //   maintainAspectRatio: false,
        //   scales: {
        //     y: {
        //       beginAtZero: true,
        //       max: 3.0,
        //       grid: {
        //         color: '#e5e5e5'
        //       },
        //     },
        //     x: {
        //       beginAtZero: true,
        //       max: 45,
        //       grid: {
        //         color: '#e5e5e5',
        //       }
        //     }
        //   },
        //   plugins: {
        //     legend: {
        //       display: false
        //     },
        //     tooltip: {
        //       // callbacks: {
        //       //   label: (context) => `+${context.raw.toFixed(2)} grade levels`
        //       // }
        //     },
        //     datalabels: {
        //       align: 'top',
        //       // offset: 10,
        //       // formatter: (value) => `${value.toFixed(2)}`,
        //       color: '#68a362',
        //       font: {
        //         size: 9
        //       }
        //     },
        //     annotation: {
        //       annotations: {
        //         line1: {
        //           type: 'line',
        //           xMin: 4.75,
        //           xMax: 4.75,
        //           borderColor: '#666666',
        //           borderWidth: 1,
        //           borderDash: [5, 5],
        //           label: {
        //             display: true,
        //             content: '1 grade level',
        //             font: { size: 10 }
        //           }
        //         },
        //         line2: {
        //           type: 'line',
        //           xMin: 15.75,
        //           xMax: 15.75,
        //           borderColor: '#666666',
        //           borderWidth: 1,
        //           borderDash: [5, 5],
        //           label: {
        //             display: true,
        //             content: '2 grade levels',
        //             font: { size: 10 }
        //           }
        //         }
        //       }
        //     }
        //   }
        // }
      });

      // Mastery by skill chart
      const masteryCtx = document.getElementById('viz-mastery-by-skill');

      new Chart(masteryCtx, {
        type: 'bar',
        data: {
          labels: ['B1 Unit 10', 'B1 Unit 11', 'B1 Unit 12', 'B2 Unit 1', 'B2 Unit 2', 'B2 Unit 3'],
          datasets: [
            {
              label: 'Letter Sounds',
              data: [96, 63, 74, 64, 91, 80],
              backgroundColor: '#2E5E29',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Spelling',
              data: [89, 88, 81, 96, 84, 83],
              backgroundColor: '#68A362',
              borderColor: 'transparent',
              borderWidth: 1,
            },
            {
              label: 'Words',
              data: [77, 82, 69, 66, 79, 93],
              backgroundColor: '#B8DBAA',
              borderColor: 'transparent',
              borderWidth: 1,
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                color: '#e5e5e5'
              },
              ticks: {
                callback: value => `${value}%`
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          },
          plugins: {
            legend: {
              position: 'left',
              align: 'middle',
              labels: {
                boxWidth: 12,
                usePointStyle: true,
                pointStyle: 'rect'
              }
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.dataset.label}: ${context.raw}%`
              }
            },
            annotation: {
              annotations: {
                line1: {
                  type: 'line',
                  yMin: 70,
                  yMax: 70,
                  borderColor: '#666666',
                  borderWidth: 1,
                  borderDash: [5, 5]
                }
              }
            },
            datalabels: {
              display: false
            }
          }
        }
      });
    </script>
  </body>
</html>
